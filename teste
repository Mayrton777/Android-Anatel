const dados = [
    {
    "NomeEntidade": "CLARO S.A.",
    "NumFistel": "50409889580",
    "NumServico": "010",
    "NumAto": "48372023",
    "NumEstacao": "2083922",
    "EnderecoEstacao": "Q 26",
    "EndComplemento": "CONJUNTO 07",
    "SiglaUf": "DF",
    "CodMunicipio": "5300108",
    "DesignacaoEmissao": "5M00G7W",
    "Tecnologia": "WCDMA",
    "tipoTecnologia": "",
    "meioAcesso": "",
    "FreqTxMHz": "2130",
    "FreqRxMHz": "1940",
    "Azimute": "220",
    "CodTipoClasseEstacao": "FB",
    "ClassInfraFisica": "Greenfield",
    "CompartilhamentoInfraFisica": "n�o",
    "CodTipoAntena": "760",
    "CodEquipamentoAntena": "",
    "GanhoAntena": "16.6",
    "FrenteCostaAntena": "24",
    "AnguloMeiaPotenciaAntena": "69",
    "AnguloElevacao": "0",
    "Polarizacao": "X",
    "AlturaAntena": "40",
    "CodEquipamentoTransmissor": "001131003257",
    "PotenciaTransmissorWatts": "62.8",
    "Latitude": "-15.91993",
    "Longitude": "-47.96529",
    "CodDebitoTFI": "G",
    "DataLicenciamento": "2023-11-06",
    "DataPrimeiroLicenciamento": "2001-08-13",
    "NumRede": "",
    "_id": "4d5c019f5deb5",
    "DataValidade": "2032-12-22",
    "NumFistelAssociado": "",
    "NomeEntidadeAssociado": ""
  },
  {
    "NomeEntidade": "CLARO S.A.",
    "NumFistel": "50409889580",
    "NumServico": "010",
    "NumAto": "169212022",
    "NumEstacao": "2083922",
    "EnderecoEstacao": "Q 26",
    "EndComplemento": "CONJUNTO 07",
    "SiglaUf": "DF",
    "CodMunicipio": "5300108",
    "DesignacaoEmissao": "200KG7W",
    "Tecnologia": "GSM",
    "tipoTecnologia": "",
    "meioAcesso": "",
    "FreqTxMHz": "1822.5",
    "FreqRxMHz": "1727.5",
    "Azimute": "360",
    "CodTipoClasseEstacao": "FB",
    "ClassInfraFisica": "Greenfield",
    "CompartilhamentoInfraFisica": "n�o",
    "CodTipoAntena": "760",
    "CodEquipamentoAntena": "",
    "GanhoAntena": "16.6",
    "FrenteCostaAntena": "24",
    "AnguloMeiaPotenciaAntena": "69",
    "AnguloElevacao": "-1",
    "Polarizacao": "X",
    "AlturaAntena": "40",
    "CodEquipamentoTransmissor": "023491603257",
    "PotenciaTransmissorWatts": "40",
    "Latitude": "-15.91993",
    "Longitude": "-47.96529",
    "CodDebitoTFI": "G",
    "DataLicenciamento": "2023-11-06",
    "DataPrimeiroLicenciamento": "2001-08-13",
    "NumRede": "",
    "_id": "4d5c019f5deb6",
    "DataValidade": "2032-12-22",
    "NumFistelAssociado": "",
    "NomeEntidadeAssociado": ""
  },
  {
    "NomeEntidade": "CLARO S.A.",
    "NumFistel": "50409889580",
    "NumServico": "010",
    "NumAto": "169212022",
    "NumEstacao": "2083922",
    "EnderecoEstacao": "Q 26",
    "EndComplemento": "CONJUNTO 07",
    "SiglaUf": "DF",
    "CodMunicipio": "5300108",
    "DesignacaoEmissao": "200KG7W",
    "Tecnologia": "GSM",
    "tipoTecnologia": "",
    "meioAcesso": "",
    "FreqTxMHz": "1822.5",
    "FreqRxMHz": "1727.5",
    "Azimute": "110",
    "CodTipoClasseEstacao": "FB",
    "ClassInfraFisica": "Greenfield",
    "CompartilhamentoInfraFisica": "n�o",
    "CodTipoAntena": "760",
    "CodEquipamentoAntena": "",
    "GanhoAntena": "16.6",
    "FrenteCostaAntena": "24",
    "AnguloMeiaPotenciaAntena": "69",
    "AnguloElevacao": "-1",
    "Polarizacao": "X",
    "AlturaAntena": "40",
    "CodEquipamentoTransmissor": "023491603257",
    "PotenciaTransmissorWatts": "40",
    "Latitude": "-15.91993",
    "Longitude": "-47.96529",
    "CodDebitoTFI": "G",
    "DataLicenciamento": "2023-11-06",
    "DataPrimeiroLicenciamento": "2001-08-13",
    "NumRede": "",
    "_id": "4d5c019f5deb7",
    "DataValidade": "2032-12-22",
    "NumFistelAssociado": "",
    "NomeEntidadeAssociado": ""
  },
  {
    "NomeEntidade": "CLARO S.A.",
    "NumFistel": "50409889580",
    "NumServico": "010",
    "NumAto": "37812011",
    "NumEstacao": "2083922",
    "EnderecoEstacao": "Q 26",
    "EndComplemento": "CONJUNTO 07",
    "SiglaUf": "DF",
    "CodMunicipio": "5300108",
    "DesignacaoEmissao": "200KG7W",
    "Tecnologia": "GSM",
    "tipoTecnologia": "",
    "meioAcesso": "",
    "FreqTxMHz": "1875",
    "FreqRxMHz": "1780",
    "Azimute": "360",
    "CodTipoClasseEstacao": "FB",
    "ClassInfraFisica": "Greenfield",
    "CompartilhamentoInfraFisica": "n�o",
    "CodTipoAntena": "760",
    "CodEquipamentoAntena": "",
    "GanhoAntena": "16.6",
    "FrenteCostaAntena": "24",
    "AnguloMeiaPotenciaAntena": "69",
    "AnguloElevacao": "-1",
    "Polarizacao": "X",
    "AlturaAntena": "40",
    "CodEquipamentoTransmissor": "023491603257",
    "PotenciaTransmissorWatts": "40",
    "Latitude": "-15.91993",
    "Longitude": "-47.96529",
    "CodDebitoTFI": "G",
    "DataLicenciamento": "2023-11-06",
    "DataPrimeiroLicenciamento": "2001-08-13",
    "NumRede": "",
    "_id": "4d5c019f5debf",
    "DataValidade": "2032-12-22",
    "NumFistelAssociado": "",
    "NomeEntidadeAssociado": ""
  },
  {
    "NomeEntidade": "CLARO S.A.",
    "NumFistel": "50409889580",
    "NumServico": "010",
    "NumAto": "37812011",
    "NumEstacao": "2083922",
    "EnderecoEstacao": "Q 26",
    "EndComplemento": "CONJUNTO 07",
    "SiglaUf": "DF",
    "CodMunicipio": "5300108",
    "DesignacaoEmissao": "200KG7W",
    "Tecnologia": "GSM",
    "tipoTecnologia": "",
    "meioAcesso": "",
    "FreqTxMHz": "1875",
    "FreqRxMHz": "1780",
    "Azimute": "110",
    "CodTipoClasseEstacao": "FB",
    "ClassInfraFisica": "Greenfield",
    "CompartilhamentoInfraFisica": "n�o",
    "CodTipoAntena": "760",
    "CodEquipamentoAntena": "",
    "GanhoAntena": "16.6",
    "FrenteCostaAntena": "24",
    "AnguloMeiaPotenciaAntena": "69",
    "AnguloElevacao": "-1",
    "Polarizacao": "X",
    "AlturaAntena": "40",
    "CodEquipamentoTransmissor": "023491603257",
    "PotenciaTransmissorWatts": "40",
    "Latitude": "-15.91993",
    "Longitude": "-47.96529",
    "CodDebitoTFI": "G",
    "DataLicenciamento": "2023-11-06",
    "DataPrimeiroLicenciamento": "2001-08-13",
    "NumRede": "",
    "_id": "4d5c019f5dec0",
    "DataValidade": "2032-12-22",
    "NumFistelAssociado": "",
    "NomeEntidadeAssociado": ""
  },
  {
    "NomeEntidade": "CLARO S.A.",
    "NumFistel": "50409889580",
    "NumServico": "010",
    "NumAto": "37812011",
    "NumEstacao": "2083922",
    "EnderecoEstacao": "Q 26",
    "EndComplemento": "CONJUNTO 07",
    "SiglaUf": "DF",
    "CodMunicipio": "5300108",
    "DesignacaoEmissao": "200KG7W",
    "Tecnologia": "GSM",
    "tipoTecnologia": "",
    "meioAcesso": "",
    "FreqTxMHz": "1875",
    "FreqRxMHz": "1780",
    "Azimute": "220",
    "CodTipoClasseEstacao": "FB",
    "ClassInfraFisica": "Greenfield",
    "CompartilhamentoInfraFisica": "n�o",
    "CodTipoAntena": "760",
    "CodEquipamentoAntena": "",
    "GanhoAntena": "16.6",
    "FrenteCostaAntena": "24",
    "AnguloMeiaPotenciaAntena": "69",
    "AnguloElevacao": "0",
    "Polarizacao": "X",
    "AlturaAntena": "40",
    "CodEquipamentoTransmissor": "023491603257",
    "PotenciaTransmissorWatts": "40",
    "Latitude": "-15.91993",
    "Longitude": "-47.96529",
    "CodDebitoTFI": "G",
    "DataLicenciamento": "2023-11-06",
    "DataPrimeiroLicenciamento": "2001-08-13",
    "NumRede": "",
    "_id": "4d5c019f5dec1",
    "DataValidade": "2032-12-22",
    "NumFistelAssociado": "",
    "NomeEntidadeAssociado": ""
  },
  {
    "NomeEntidade": "CLARO S.A.",
    "NumFistel": "50409889580",
    "NumServico": "010",
    "NumAto": "59602012",
    "NumEstacao": "2083922",
    "EnderecoEstacao": "Q 26",
    "EndComplemento": "CONJUNTO 07",
    "SiglaUf": "DF",
    "CodMunicipio": "5300108",
    "DesignacaoEmissao": "20M0G7W",
    "Tecnologia": "LTE",
    "tipoTecnologia": "",
    "meioAcesso": "",
    "FreqTxMHz": "2640",
    "FreqRxMHz": "2520",
    "Azimute": "360",
    "CodTipoClasseEstacao": "FB",
    "ClassInfraFisica": "Greenfield",
    "CompartilhamentoInfraFisica": "n�o",
    "CodTipoAntena": "760",
    "CodEquipamentoAntena": "",
    "GanhoAntena": "17.9",
    "FrenteCostaAntena": "25",
    "AnguloMeiaPotenciaAntena": "58",
    "AnguloElevacao": "-1",
    "Polarizacao": "X",
    "AlturaAntena": "40",
    "CodEquipamentoTransmissor": "018141603257",
    "PotenciaTransmissorWatts": "40",
    "Latitude": "-15.91993",
    "Longitude": "-47.96529",
    "CodDebitoTFI": "G",
    "DataLicenciamento": "2023-11-06",
    "DataPrimeiroLicenciamento": "2001-08-13",
    "NumRede": "",
    "_id": "4d5c019f5decd",
    "DataValidade": "2032-12-22",
    "NumFistelAssociado": "",
    "NomeEntidadeAssociado": ""
  },
  {
    "NomeEntidade": "CLARO S.A.",
    "NumFistel": "50409889580",
    "NumServico": "010",
    "NumAto": "59602012",
    "NumEstacao": "2083922",
    "EnderecoEstacao": "Q 26",
    "EndComplemento": "CONJUNTO 07",
    "SiglaUf": "DF",
    "CodMunicipio": "5300108",
    "DesignacaoEmissao": "20M0G7W",
    "Tecnologia": "LTE",
    "tipoTecnologia": "",
    "meioAcesso": "",
    "FreqTxMHz": "2640",
    "FreqRxMHz": "2520",
    "Azimute": "110",
    "CodTipoClasseEstacao": "FB",
    "ClassInfraFisica": "Greenfield",
    "CompartilhamentoInfraFisica": "n�o",
    "CodTipoAntena": "760",
    "CodEquipamentoAntena": "",
    "GanhoAntena": "17.9",
    "FrenteCostaAntena": "25",
    "AnguloMeiaPotenciaAntena": "58",
    "AnguloElevacao": "-1",
    "Polarizacao": "X",
    "AlturaAntena": "40",
    "CodEquipamentoTransmissor": "018141603257",
    "PotenciaTransmissorWatts": "40",
    "Latitude": "-15.91993",
    "Longitude": "-47.96529",
    "CodDebitoTFI": "G",
    "DataLicenciamento": "2023-11-06",
    "DataPrimeiroLicenciamento": "2001-08-13",
    "NumRede": "",
    "_id": "4d5c019f5ded0",
    "DataValidade": "2032-12-22",
    "NumFistelAssociado": "",
    "NomeEntidadeAssociado": ""
  },
  {
    "NomeEntidade": "CLARO S.A.",
    "NumFistel": "50409889580",
    "NumServico": "010",
    "NumAto": "59602012",
    "NumEstacao": "2083922",
    "EnderecoEstacao": "Q 26",
    "EndComplemento": "CONJUNTO 07",
    "SiglaUf": "DF",
    "CodMunicipio": "5300108",
    "DesignacaoEmissao": "20M0G7W",
    "Tecnologia": "LTE",
    "tipoTecnologia": "",
    "meioAcesso": "",
    "FreqTxMHz": "2640",
    "FreqRxMHz": "2520",
    "Azimute": "220",
    "CodTipoClasseEstacao": "FB",
    "ClassInfraFisica": "Greenfield",
    "CompartilhamentoInfraFisica": "n�o",
    "CodTipoAntena": "760",
    "CodEquipamentoAntena": "",
    "GanhoAntena": "17.9",
    "FrenteCostaAntena": "25",
    "AnguloMeiaPotenciaAntena": "58",
    "AnguloElevacao": "0",
    "Polarizacao": "X",
    "AlturaAntena": "40",
    "CodEquipamentoTransmissor": "018141603257",
    "PotenciaTransmissorWatts": "40",
    "Latitude": "-15.91993",
    "Longitude": "-47.96529",
    "CodDebitoTFI": "G",
    "DataLicenciamento": "2023-11-06",
    "DataPrimeiroLicenciamento": "2001-08-13",
    "NumRede": "",
    "_id": "4d5c019f5ded2",
    "DataValidade": "2032-12-22",
    "NumFistelAssociado": "",
    "NomeEntidadeAssociado": ""
  },
  {
    "NomeEntidade": "CLARO S.A.",
    "NumFistel": "50409889580",
    "NumServico": "010",
    "NumAto": "169212022",
    "NumEstacao": "2083922",
    "EnderecoEstacao": "Q 26",
    "EndComplemento": "CONJUNTO 07",
    "SiglaUf": "DF",
    "CodMunicipio": "5300108",
    "DesignacaoEmissao": "200KG7W",
    "Tecnologia": "GSM",
    "tipoTecnologia": "",
    "meioAcesso": "",
    "FreqTxMHz": "1822.5",
    "FreqRxMHz": "1727.5",
    "Azimute": "220",
    "CodTipoClasseEstacao": "FB",
    "ClassInfraFisica": "Greenfield",
    "CompartilhamentoInfraFisica": "n�o",
    "CodTipoAntena": "760",
    "CodEquipamentoAntena": "",
    "GanhoAntena": "16.6",
    "FrenteCostaAntena": "24",
    "AnguloMeiaPotenciaAntena": "69",
    "AnguloElevacao": "0",
    "Polarizacao": "X",
    "AlturaAntena": "40",
    "CodEquipamentoTransmissor": "023491603257",
    "PotenciaTransmissorWatts": "40",
    "Latitude": "-15.91993",
    "Longitude": "-47.96529",
    "CodDebitoTFI": "G",
    "DataLicenciamento": "2023-11-06",
    "DataPrimeiroLicenciamento": "2001-08-13",
    "NumRede": "",
    "_id": "4d5c019f5ded5",
    "DataValidade": "2032-12-22",
    "NumFistelAssociado": "",
    "NomeEntidadeAssociado": ""
  },
  {
    "NomeEntidade": "CLARO S.A.",
    "NumFistel": "50409889580",
    "NumServico": "010",
    "NumAto": "37812011",
    "NumEstacao": "2083922",
    "EnderecoEstacao": "Q 26",
    "EndComplemento": "CONJUNTO 07",
    "SiglaUf": "DF",
    "CodMunicipio": "5300108",
    "DesignacaoEmissao": "5M00G7W",
    "Tecnologia": "WCDMA",
    "tipoTecnologia": "",
    "meioAcesso": "",
    "FreqTxMHz": "885",
    "FreqRxMHz": "840",
    "Azimute": "220",
    "CodTipoClasseEstacao": "FB",
    "ClassInfraFisica": "Greenfield",
    "CompartilhamentoInfraFisica": "n�o",
    "CodTipoAntena": "760",
    "CodEquipamentoAntena": "",
    "GanhoAntena": "14.1",
    "FrenteCostaAntena": "22",
    "AnguloMeiaPotenciaAntena": "68",
    "AnguloElevacao": "0",
    "Polarizacao": "X",
    "AlturaAntena": "40",
    "CodEquipamentoTransmissor": "011631703257",
    "PotenciaTransmissorWatts": "60",
    "Latitude": "-15.91993",
    "Longitude": "-47.96529",
    "CodDebitoTFI": "G",
    "DataLicenciamento": "2023-11-06",
    "DataPrimeiroLicenciamento": "2001-08-13",
    "NumRede": "",
    "_id": "4d5c019f5dee3",
    "DataValidade": "2032-12-22",
    "NumFistelAssociado": "",
    "NomeEntidadeAssociado": ""
  }
]

function w_to_dBm(valor) {
    return 10 * Math.log10(valor * 1000);
}

function EIRP(ptx, gtx) {
    return ptx + gtx;
}

function dBm_to_w(valor) {
    return (10**(valor / 10)) / 1000;
}

function Slim(valor) {
    if (valor >= 2000) {
        return 10;
    } else {
        return valor / 200;
    }
}

function EIRP_Slim(eirp, slim) {
    return eirp / slim;
}

function calculo_R(valor) {
    let somatoria = 0;
    valor.forEach(dt => {
        const { FreqTxMHz: freq, GanhoAntena: gTx, PotenciaTransmissorWatts: pTx } = dt;
        
        let freqTx = parseFloat(freq);
        let gtx = parseFloat(gTx);
        let ptx = parseFloat(pTx);
    
        let ptxdBm = w_to_dBm(ptx);
        let eirp = ptxdBm + gtx;
        let eirpW = dBm_to_w(eirp);
        let slim = Slim(freqTx);
    
        let resultado = eirpW / slim;
        somatoria += resultado;
    });

    let result = somatoria / (4 * Math.PI);
    return Math.sqrt(result);
}

function TER(valor, raio) {
    let somatoria = 0;
    
    if (Array.isArray(valor)) {
        valor.forEach(dado => {
            const { FreqTxMHz: freq, GanhoAntena: gTx, PotenciaTransmissorWatts: pTx } = dado;
        
            let freqTx = parseFloat(freq);
            let gtx = parseFloat(gTx);
            let ptx = parseFloat(pTx);
                
            let ptxdBm = w_to_dBm(ptx);
            let eirp = ptxdBm + gtx;
            let eirpW = dBm_to_w(eirp);
            let slim = Slim(freqTx);
            
            let result = (eirpW / (4 * Math.PI * raio * raio)) / slim;
            somatoria += result;
        });
    } else {
        console.log("valor não é um array:", valor);
    }
    
    return somatoria;
}

function corRaio(cor) {
    if (cor > 1) {
        return [255, 0, 0];
    } else if (0.5 < cor && cor <= 1) {
        return [255, 69, 0];
    } else if (0.35 < cor && cor <= 0.5) {
        return [255, 165, 0];
    } else if (0.2 < cor && cor <= 0.35) {
        return [255, 223, 0];
    } else if (0.15 < cor && cor <= 0.2) {
        return [0, 128, 0];
    } else if (0.08 < cor && cor <= 0.15) {
        return [50, 205, 50];
    } else if (0.04 < cor && cor <= 0.08) {
        return [144, 238, 144];
    } else if (0.02 < cor && cor <= 0.04) {
        return [42, 80, 190];
    } else if (0.01 < cor && cor <= 0.02) {
        return [30, 144, 255];
    } else if (cor <= 0.01) {
        return [115, 194, 251];
    } else {
        console.log("ERROR VALOR DE COR");
    }
}

function filtrarCoresUnicas(listaCor) {
    let coresUnicas = [];
    let coresVistas = new Set();

    for (let item of listaCor) {
        let corString = item.cor.join(',');
        if (!coresVistas.has(corString)) {
            coresUnicas.push(item);
            coresVistas.add(corString);
        }
    }

    return coresUnicas;
}

function alcanceTorre(dados) {
    let listaCor = [];
    for (let i = -1; i < 130; i++) {
        let valor = dados;
        let raio = calculo_R(valor) + i;
        let cor = corRaio(TER(valor, raio));
        listaCor.push({ cor, raio });
    }
    return filtrarCoresUnicas(listaCor);
}

console.log(alcanceTorre(dados));
